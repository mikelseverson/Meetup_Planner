<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="create-meetup">
  <style>
    #slider {
      width: 100%;
      --paper-slider-disabled-active-color: --google-blue-700;
    }
    .page-title {
      margin-bottom: 0;
    }
    paper-button {
      width: 100%;
      background: #2E3AA1;
      color: black;
    }
    paper-button:hover {
      background: #3372DF;
    }
    paper-button[disabled],
    paper-button[toggles][active] {
      background: #fafafa;
      color: gray;
    }
  </style>

  <template>
    <paper-progress id="slider"></paper-progress>

    <h2 class="page-title">New Meetup</h2>
    <paper-input label="What are we calling this event?" value="{{params.eventName::input}}"></paper-input>
    <paper-input label="What type of event is this?" value="{{params.eventType::input}}"></paper-input>
    <paper-input label="Who will be hosting this event?" value="{{params.eventHost::input}}"></paper-input>
    <paper-input label="Who will be attending this event?"></paper-input>

    <h3 class="page-title">Details</h3>
    <paper-input label="Where is the meetup located?" value="{{params.eventLocation::input}}"></paper-input>
    <paper-input label="Event start date and time"  value="{{params.eventStartTime::input}}" style="width: 30%; display: inline-block;"></paper-input>
    <paper-input label="Event end date and time"  value="{{params.eventEndTime::input}}" style="width: 30%; display: inline-block;"></paper-input>

    <paper-button id="create-meetup-btn" raised on-tap="createMeetupHandler" disabled="{{computeCreateEventDisabled(params.name)}}">Create</paper-button>
  </template>
  <script>
  (function () {
    'use strict'
    Polymer({
      is: 'create-meetup',
      properties: {
        params: {
          type: Object,
          value: {
            eventName: '',
            eventType: '',
            eventHost: '',
            eventLocation: '',
            eventStartTime: '',
            eventEndTime: ''
          }
        },
        validation: {
          type: Object,
          value: {
            name: {
              type: Boolean
              },
            email: {
              type: Boolean
              }
          }
        }
      },
      validateForm: function (params) {
        if(!params) return;

        // name
        // host
        // time
        // endtime
        // location ( request then confirm through google)
        // event type (array search)
        //
        //
        //
        // d
        //Check if form is valid then adjust progress bar based on validaty then
        //open notification box showing value errors

        //Adjust progress bar based on the form validation status

        //If form valid return true and make create event button clickable
      },
      createMeetupHandler: function (e) {
        //Button was successfully clicked.

        //revalidate form, if form is valid send data to firebase

        //parse firebase response add event data to database

      },
      computeCreateEventDisabled: function (params) {
      //call validate form

      //if form is valid make button clickable
      }
    })
  })()
  </script>
</dom-module>
